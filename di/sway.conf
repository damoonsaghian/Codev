default_border none
default_floating_border pixel 1
hide_edge_borders --i3 smart
workspace_layout tabbed
font sans 10.5
# class                 border  backgr. text
client.focused          #222222 #4285F4 #ffffff
client.focused_inactive #222222 #555555 #ffffff
client.unfocused        #222222 #555555 #ffffff
client.urgent           #222222 #555555 #ffffff

focus_follows_mouse no

exec swayidle -w \
  timeout 595 'swaymsg "[title=*] opacity 0.5"' \
    resume 'swaymsg "[title=*] opacity 1"' \
  timeout 597 'swaymsg "[title=*] opacity 0.2"' \
  timeout 600 'swaylock --daemonize --color 000000; swaymsg "output * dpms off"' \
    resume 'swaymsg "output * dpms on"' \
  before-sleep 'swaylock --daemonize --color 000000' \
  lock 'swaymsg "mode lock"' \
  unlock 'swaymsg "mode default"'

mode lock bindsym Escape "loginctl lock-session; switch-user"

set $swapps "mode swapps; exec python3 /usr/local/share/swapps.py"

bar {
  status_command python3 /usr/local/share/sway-status.py
  height 16
  separator_symbol " "
  colors {
    background #222222
    statusline #ffffff
  }
  position bottom
  output primary
  workspace_buttons no
  bindsym button1 $swapps
}

bindsym Mod1+Return $swapps
bindsym Super_R $swapps
bindsym Super_L $swapps

mode swapps bindsym Mod1+Return exec killall bemenu; mode default; workspace 1
bindsym Mod1+Tab workspace 1
workspace_auto_back_and_forth yes

mode swapps bindsym Mod1+space exec killall bemenu; mode default; \
  [workspace=__focused__ floating] kill; focus next
bindsym Mod1+grave [workspace=__focused__ floating] kill; focus next
focus_wrapping workspace

mode swapps bindsym Mod1+BackSpace exec killall bemenu; mode default; kill
bindsym Mod1+Escape kill

mode swapps bindsym Alt_L exec killall bemenu
mode swapps bindsym Alt_R exec killall bemenu

# https://github.com/swaywm/sway/wiki#gtk-applications-take-20-seconds-to-start
exec dbus-update-activation-environment --systemd DISPLAY WAYLAND_DISPLAY SWAYSOCK

workspace 1:comshell
exec sh -c "comshell || python3 /usr/local/share/comshell-py/ || swaymsg \"$swapps\""
