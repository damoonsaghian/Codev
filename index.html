<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<title>Codev</title>
<link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/hack-font@3.3.0/build/web/hack.css'>
<style>
body {
	padding: 4px;
	margin: 0;
	font-family: Hack;
	font-size: 11ppt;
	color: #222222;
	white-space: pre;
	tab-size: 4;
}
</style>
</head><body><a href='https://github.com/damoonsaghian/Codev'><h1>Codev</h1></a>
<h2>1, Codev</h2><div>Codev is a COllaborative DEVelopment environment with command'based user interface,
</div><div>	as an ideal frontend for GNUnet
</div><div>
</div><div>list of all projects will appear in a floating layer, at the center of the screen, called overview layer
</div><div>overview layer:
</div><div>, left panel:
</div><div>	, roots: home directory, plus attached devices
</div><div>	, project groups: content of roots
</div><div>, main view:
</div><div>	projects: content of project groups
</div><div>
</div><div><img src="codev.png" alt="codev.png"/>
</div><div>
</div><div>in a project view, the list of files of a project will be displayed in the left side'bar
</div><div>opened files will be slightly highlighted
</div><div>files and directories with names starting with a dot, will be hidden
</div><div>".cache" directory inside a project is for files we don't want to share or backup
</div><div>
</div><div>each opened file will have a side'bar at right showing its sections
</div><div>there we can create new view corresponding to a section
</div><div>sections with views will be slightly highlighted
</div><div>
</div><div>text files will be opened in a text editor
</div><div>directories containing media files, will be opened in a gallery view
</div><div>files and directories inside a gallery, will be opened in a floating layer
</div><div>
</div><div>non'local projects, web pages, PDF documents, etc, accessed from links inside the main project,
</div><div>	will be opened in a floating layer
</div><div>web pages: move caret between visual elements (ignoring structural elements)
</div><div>
</div><div>actions:
</div><div>, next/previous word, line, paragraph, section
</div><div>	ask before crossing files
</div><div>, next/previous section view, opened file
</div><div>, go to the list of files to open a file view
</div><div>, go to the list of sections to open a section view
</div><div>, start and end selection, then copy or cut
</div><div>, paste
</div><div>, undo
</div><div>
</div><div>, navigation: move, search
</div><div>, selection
</div><div>, completion
</div><div>
</div><div>right click or ctrl+enter: show a list of available commands and their key bindings
</div><div>
</div><div><b>collaborative development</b>
</div><div>flaws of version control systems:
</div><div>, they double the storage (working directory, local repository)
</div><div>, their design makes it difficult to modify the history
</div><div>	so in practice, the whole history must be kept indefinitely, even if not needed
</div><div>
</div><div>when we download a project, a pristine copy is kept untouched in ".cache/codev/pristine",
</div><div>	and ref links will be created in the working directory, and then we can work on our own branch
</div><div>after a while when we want to pull and merge changes made in the main branch,
</div><div>	first a three'way diff will be shown, based on the main branch, pristine, and the working directory,
</div><div>	then the user will be asked to accept all or some parts of the diff
</div><div>to send a pull request to the main branch, first publish the pristine and the working directory (except .cache),
</div><div>	then send the two addresses to the main developer
</div><div>	the main developer will make a diff based on these two, plus her own working directory
</div><div>
</div><div>we can use GNUnet to share files in a P2P (a opposed to client'server) network
</div><div><a href="https://www.gnunet.org/en/">https://www.gnunet.org/en/</a>
</div><div><a href="https://docs.gnunet.org/latest/">https://docs.gnunet.org/latest/</a>
</div><div>"the GNUnet system" by Christian Grothoff (<a href="https://grothoff.org/christian/habil.pdf">https://grothoff.org/christian/habil.pdf</a>)
</div>
<h2>2, command based user interface</h2><div>command based user interfaces (using keyboard, voice, gesture) are faster, more convenient and more powerful,
</div><div>	than pointer based user interfaces (using mouse, touch, pen)
</div><div>pointer based interface seems appealing at first sight, because of its discoverability
</div><div>but with simple uniform GUI (ie the oposite of what we see in websites),
</div><div>	there is no need for a pointer based user interface
</div><div>
</div><div>touch interface has an additional problem: interaction at a distance is not possible
</div><div>touch interface can be useful in some special cases, but it's not good as a general interface
</div><div>
</div><div>detection of voice commands is a relatively simple process (compared to general speech recognition),
</div><div>	because we only need to match against a relatively small set of commands
</div><div>a headset with near range microphone can be used, to exclude far away sound sources
</div><div>also it is better to put battery and transmitter of the headset in a separate unit which can be put in a pocket
</div><div>	this makes the headset lighter and safer
</div><div>
</div><div>for those who neither can use all their fingers, nor can talk, gesture based (2d) input can be implemented
</div><div>
</div><div><b>the ideal keyboard</b>
</div><div><img src="keyboard.png" alt="keyboard.png"/>
</div><div>
</div><div>navigation keys (arrows, page up, page down, home, end, esc), and ctrl/shift/alt based keybindings,
</div><div>	are available by pressing and holding "mod" key
</div><div>pressing one "mod" key while holding the other one, is equivalent to Super key
</div><div>
</div><div>to insert punctuations (in insert mode), press "pun"
</div><div>	after entering a punctuation charactor, it automatically returns to normal mode
</div><div>	unless the "pun" key is still pressed, in which case, it will return to normal mode after releasing "pun"
</div><div>to insert numbers, press and hold "num"
</div><div>
</div><div>pressing and releasing "Fn", sends "Super+L" key press (usually bound to session locking)
</div><div>holding "Fn" and pressing a number eg 1, sends "F1" key
</div><div>
</div><div>to insert capital letters, press comma then press the letter
</div><div>to insert an all capital word, press two commas
</div><div>	the following letters will be inserted in capitalized form, until space is pressed
</div><div>this is how it is implemented:
</div><div>when comma key is pressed, keyboard enters the cap mode in which:
</div><div>, pressing a letter key, sends a "backspace" key, and then the capitalized form of that letter,
</div><div>	and then the cap mode will be canceled
</div><div>, pressing comma again, sends a "backspace" key, and activates caps mode,
</div><div>	which remains active until space (or enter or mod) is pressed
</div><div>, pressing any other keys, acts like normal, and cancels the cap mode
</div><div>
</div><div><a href="https://jasoncarloscox.com/writing/my-strange-keyboards/">https://jasoncarloscox.com/writing/my-strange-keyboards/</a>
</div><div>	<a href="https://jasoncarloscox.com/creations/kyria/">https://jasoncarloscox.com/creations/kyria/</a>
</div><div>	<a href="https://jasoncarloscox.com/creations/lego-keyboard-stand/">https://jasoncarloscox.com/creations/lego-keyboard-stand/</a>
</div><div><a href="https://splitkb.com/">https://splitkb.com/</a>
</div><div><a href="https://shop.keyboard.io/">https://shop.keyboard.io/</a>
</div><div><a href="https://github.com/abstracthat/dactyl-manuform">https://github.com/abstracthat/dactyl-manuform</a>
</div><div><a href="https://zealot.hu/absolem/">https://zealot.hu/absolem/</a>
</div><div><a href="https://github.com/foostan/crkbd">https://github.com/foostan/crkbd</a>
</div><div><a href="https://github.com/nglgzz/42">https://github.com/nglgzz/42</a>
</div><div><a href="https://github.com/adereth/dactyl-keyboard">https://github.com/adereth/dactyl-keyboard</a>
</div><div>Kinesis Advantage 2 keyboard
</div><div><a href="http://www.allthingsergo.com/the-best-ergonomic-mechanical-keyboards/">http://www.allthingsergo.com/the-best-ergonomic-mechanical-keyboards/</a>
</div>
<h2>3, CodevShell</h2><div>CodevShell is a Wayland shell, based on QuickShell
</div><div>
</div><div>there is an application launcher which can be toggled by pressing "super" (mod+mod) or "alt+tab"
</div><div>the first item in application launcher is "system", which opens the system menu:
</div><div>, session (lock, suspend, exit, reboot, poweroff)
</div><div>, connections
</div><div>, timezone
</div><div>, passwords
</div><div>, packages (install, remove, update, make a new system)
</div><div>, backup
</div><div>to close the focused window, press "super+backspace" or "alt+escape"
</div><div>
</div><div>press "alt+space" to show the terminal emulator; to close it press "ctrl+tab"
</div><div>the entered command will be run in a new terminal view, inside a list at the right
</div><div>when terminal view finishes its job, if there is any output, its be transfered to the history list under the prompt
</div><div>to navigate between terminal views, use "ctrl+pageup" and "ctrl+pagedown" keys
</div><div>to navigate in history list, use "up" and "down" arrow keys
</div><div>	to re'run a command in history, just press enter on it
</div><div>to close a terminal view (that will also kill any running process) press "super+backspace" or "alt+escape"
</div><div>
</div><div>you can easily create a backup on a removable storage device
</div><div>backups will be done using "BTRFS send", so they will be incremental and fast
</div><div>the backup device has two partition:
</div><div>, a bootable UEFI partition that can recover your entire workflow on a new system
</div><div>, an encrypted partition containing a backup of your home directory
</div><div>each time the device is connected, the backup procedure will be run automatically
</div><div>even in case of bit rot for data in home directory, this procedure repairs it automatically
</div><div>
</div><div>SPM Linux (a work in progress) provides a user interface based on CodevShell and Codev
</div><div>we can also use Alpine Linux as the underling system to run CodevShell and Codev
</div><div>to do that follow these instructions (the commands must be run as root)
</div><div>on a removable storage device create a UEFI partition, and format it with FAT32
</div><div>; fdisk -l # find the device name, and write it in place of "sdx" in the following commands
</div><div>; printf "g\nn\n1\n\n\nt\nuefi\nw\nq\n" | fdisk -w always /dev/sdx
</div><div>; mkfs.vfat -F 32 /dev/sdx1
</div><div>; mount /dev/sdx1 /mnt
</div><div>extract the contents of the Alpine Linux installer image file, to /mnt
</div><div>also copy the content of this project to /mnt/codev
</div><div>now boot to the removable device
</div><div>note that only UEFI systems are supported; they are the only ones supporting secure boot
</div><div>
</div><div>to run a program as root:
</div><div>; sudo &ltcommand&gt
</div><div>using "sudo" in CodevShell does not suffer from these flaws:
</div><div>https://www.reddit.com/r/linuxquestions/comments/8mlil7/whats_the_point_of_the_sudo_password_prompt_if/
</div><div>https://security.stackexchange.com/questions/119410/why-should-one-use-sudo
</div><div>because:
</div><div>, when a user enters "sudo" in command line, it will run /usr/bin/sudo
</div><div>, reaching to terminal in CodevShell can't be manipulated by normal user
</div><div>	app launcher -&gt system -&gt sudo &ltcommand&gt
</div><div>, CodevShell only allows keyboard input from real keyboard, or from the built'in on'screen keyboard
</div><div>, there is no way for normal user to replace CodevShell
</div><div>, sudo works only when called from CodevShell
</div><div>all these imply:
</div><div>, a malicious program can't steal root password (eg by faking password entry)
</div><div>, to run a command as root, physical access is necessary, because there is no other way to enter root password
</div>
</body></html>
